import{r as a,d as y,f as E,u as k,j as e,L as j,B as q}from"./index-BgUsncLc.js";import{S as p,l as R}from"./AuthActions-B36JzTCP.js";function O(o){const[r,f]=a.useState(""),[d,N]=a.useState(""),[u,m]=a.useState(!1);let h={email:"",password:""};const[c,v]=a.useState(h),[t,b]=a.useState("");console.log(r),console.log(t),console.log(d);const i=y(s=>s.user).token;console.log(i);const x=E();a.useEffect(()=>{if(i)try{const s=jwtDecode(i),n=Date.now()/1e3;s.exp>n&&x("/")}catch{console.log("Invalid token")}},[i,x]);const g=k(),w=()=>{m(!0),g(q({name:d,email:r,password:t})).unwrap().then(()=>{m(!1)}).catch(()=>{m(!1)})};function S(s){s.preventDefault();let n=!1;const l={...h};r===""&&(l.email="Email is Required",n=!0,p.fire({icon:"error",title:"Oops",text:l.password})),t===""&&(l.password="Password is Required",n=!0,p.fire({icon:"error",title:"Oops",text:l.password})),v(l),!n&&(g(R(!0)),console.log("from registration page",d,r,t))}return e.jsx("div",{className:"authincation h-100 p-meddle",children:e.jsx("div",{className:"container h-100",children:e.jsx("div",{className:"row justify-content-center h-100 align-items-center",children:e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"authincation-content",children:e.jsx("div",{className:"row no-gutters",children:e.jsx("div",{className:"col-xl-12",children:e.jsxs("div",{className:"auth-form",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx(j,{to:"/login",children:e.jsx("img",{src:"/logo.png",alt:"",style:{width:"100px",borderRadius:"20px"}})})}),e.jsx("h4",{className:"text-center mb-4 ",children:"Sign up your account"}),o.errorMessage&&e.jsx("div",{className:"",children:o.errorMessage}),o.successMessage&&e.jsx("div",{className:"",children:o.successMessage}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{className:"mb-1 ",children:[e.jsx("strong",{children:"Username"}),e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",placeholder:"username",onChange:s=>N(s.target.value)})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{className:"mb-1 ",children:[e.jsx("strong",{children:"Email"}),e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{defaultValue:r,onChange:s=>f(s.target.value),className:"form-control",placeholder:"email"})]}),c.email&&e.jsx("div",{children:c.email}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{className:"mb-1 ",children:[e.jsx("strong",{children:"Password"}),e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{defaultValue:t,onChange:s=>b(s.target.value),className:"form-control",placeholder:"password"})]}),c.password&&e.jsx("div",{children:c.password}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{type:"submit",className:"btn btn-primary btn-block",onClick:w,disabled:u,children:u?e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}):"Sign me up"})})]}),e.jsx("div",{className:"new-account mt-3",children:e.jsxs("p",{className:"",children:["Already have an account?"," ",e.jsx(j,{className:"text-primary",to:"/login",children:"Sign in"})]})})]})})})})})})})})}export{O as default};
